<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Functoria_graph (functoria.app.Functoria_graph)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">functoria.app</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Functoria_graph</span></h1></header><p>Graph engine</p><div class="spec type" id="type-subconf"><a href="#type-subconf" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>subconf</code><code><span class="keyword"> = </span>&lt; name : string; module_name : string; keys : <a href="../../functoria/Functoria/index.html#type-key">Functoria.key</a> list; packages : <a href="../../functoria/Functoria/index.html#type-package">Functoria.package</a> list <a href="../../functoria/Functoria/index.html#type-value">Functoria.value</a>; connect : <a href="../../functoria/Functoria/Info/index.html#type-t">Functoria.Info.t</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string list <span class="keyword">&#8209;&gt;</span> string; build : <a href="../../functoria/Functoria/Info/index.html#type-t">Functoria.Info.t</a> <span class="keyword">&#8209;&gt;</span> (unit, [ `Msg of string ]) Rresult.result; configure : <a href="../../functoria/Functoria/Info/index.html#type-t">Functoria.Info.t</a> <span class="keyword">&#8209;&gt;</span> (unit, [ `Msg of string ]) Rresult.result; clean : <a href="../../functoria/Functoria/Info/index.html#type-t">Functoria.Info.t</a> <span class="keyword">&#8209;&gt;</span> (unit, [ `Msg of string ]) Rresult.result; &gt;</code><code></code></div><div class="doc"><p>A subset of configurable with neither polymorphism nor recursion.</p></div></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-vertex"><a href="#type-vertex" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>vertex</code><code></code><code></code></div><div class="doc"></div></div><div class="spec module" id="module-If"><a href="#module-If" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="If/index.html">If</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec type" id="type-label"><a href="#type-label" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>label</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-label.If" class="anchored"><td class="def constructor"><a href="#type-label.If" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">If</span><span class="keyword"> of </span><a href="If/index.html#type-path">If.path</a> <a href="../../functoria/Functoria/index.html#type-value">Functoria.value</a></code></td></tr><tr id="type-label.Impl" class="anchored"><td class="def constructor"><a href="#type-label.Impl" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Impl</span><span class="keyword"> of </span><a href="index.html#type-subconf">subconf</a></code></td></tr><tr id="type-label.App" class="anchored"><td class="def constructor"><a href="#type-label.App" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">App</span></code></td></tr></table><code></code></div><div class="doc"><p>The description of a vertex</p></div></div><div class="spec module" id="module-Tbl"><a href="#module-Tbl" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Tbl : Hashtbl.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-Tbl">Tbl</a>.key<span class="keyword"> = </span><a href="index.html#type-vertex">vertex</a></code></div><div class="doc"></div></div><div class="spec val" id="val-create"><a href="#val-create" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>create : <span class="type-var">_</span> <a href="../../functoria/Functoria/index.html#type-impl">Functoria.impl</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">create impl</code> creates a graph based <code class="code">impl</code>.</p></div></div><div class="spec val" id="val-normalize"><a href="#val-normalize" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>normalize : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">normalize g</code> normalize the graph <code class="code">g</code> by removing the <code class="code">App</code> vertices.</p></div></div><div class="spec val" id="val-simplify"><a href="#val-simplify" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>simplify : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">simplify g</code> simplifies the graph so that it's easier to read for humans.</p></div></div><div class="spec val" id="val-eval"><a href="#val-eval" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>eval : ?&#8288;partial:bool <span class="keyword">&#8209;&gt;</span> context:<a href="../../functoria/Functoria/index.html#type-context">Functoria.context</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">eval ~keys g</code> will removes all the <code class="code">If</code> vertices by resolving the
keys using <code class="code">keys</code>. It will then call <a href="index.html#val-normalize">normalize</a></p><p>If <code class="code">partial</code> is <code class="code">true</code>, then it will only evaluate <code class="code">If</code> vertices
which condition is resolved.</p></div></div><div class="spec val" id="val-is_fully_reduced"><a href="#val-is_fully_reduced" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_fully_reduced : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p><code class="code">is_fully_reduced g</code> is true if <code class="code">g</code> contains only
<code class="code">Impl</code> vertices.</p></div></div><div class="spec val" id="val-fold"><a href="#val-fold" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fold : (<a href="index.html#type-vertex">vertex</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p><code class="code">fold f g z</code> applies <code class="code">f</code> on each vertex of <code class="code">g</code> in topological order.</p></div></div><div class="spec val" id="val-find_all"><a href="#val-find_all" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>find_all : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-label">label</a> <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-vertex">vertex</a> list</code></div><div class="doc"><p><code class="code">find_all g p</code> returns all the vertices in <code class="code">g</code> such as <code class="code">p v</code> is true.</p></div></div><div class="spec val" id="val-find_root"><a href="#val-find_root" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>find_root : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-vertex">vertex</a></code></div><div class="doc"><p><code class="code">find_root g</code> returns the only vertex of <code class="code">g</code> that has no predecessors.</p></div></div><div class="spec val" id="val-explode"><a href="#val-explode" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>explode : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-vertex">vertex</a> <span class="keyword">&#8209;&gt;</span> [ `App of <a href="index.html#type-vertex">vertex</a><span class="keyword"> * </span><a href="index.html#type-vertex">vertex</a> list | `If of <a href="If/index.html#type-path">If.path</a> <a href="../../functoria/Functoria/index.html#type-value">Functoria.value</a><span class="keyword"> * </span>(<a href="If/index.html#type-path">If.path</a><span class="keyword"> * </span><a href="index.html#type-vertex">vertex</a>) list | `Impl of <a href="index.html#type-subconf">subconf</a><span class="keyword"> * </span>[&gt; `Args of <a href="index.html#type-vertex">vertex</a> list ]<span class="keyword"> * </span>[&gt; `Deps of <a href="index.html#type-vertex">vertex</a> list ] ]</code></div><div class="doc"><p><code class="code">explode g v</code> deconstructs the vertex <code class="code">v</code> in the graph <code class="code">g</code>
into it's possible components.
It also checks that the local invariants are respected.</p></div></div><div class="spec val" id="val-collect"><a href="#val-collect" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>collect : (<span class="keyword">module </span><a href="../../functoria/Functoria_misc/module-type-Monoid/index.html">Functoria_misc.Monoid</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="../../functoria/Functoria_misc/module-type-Monoid/index.html#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'ty</span>) <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-label">label</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'ty</span>) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'ty</span></code></div><div class="doc"><p><code class="code">collect (module M) f g</code> collects the content of <code class="code">f v</code> for
each vertex <code class="code">v</code> in <code class="code">g</code>.</p></div></div><div class="spec val" id="val-hash"><a href="#val-hash" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>hash : <a href="index.html#type-vertex">vertex</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"></div></div><div class="spec val" id="val-pp"><a href="#val-pp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp : <a href="index.html#type-t">t</a> Fmt.t</code></div><div class="doc"><p>Textual representation of the graph.</p></div></div><div class="spec val" id="val-pp_dot"><a href="#val-pp_dot" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_dot : <a href="index.html#type-t">t</a> Fmt.t</code></div><div class="doc"><p>Dot representation of the graph.</p></div></div></body></html>