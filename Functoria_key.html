<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Functoria.html">
<link rel="next" href="Functoria_runtime.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of classes" rel=Appendix href="index_classes.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Functoria" rel="Chapter" href="Functoria.html">
<link title="Functoria_key" rel="Chapter" href="Functoria_key.html">
<link title="Functoria_runtime" rel="Chapter" href="Functoria_runtime.html">
<link title="Functoria_info" rel="Chapter" href="Functoria_info.html">
<link title="Functoria_app" rel="Chapter" href="Functoria_app.html"><link title="Configuration Keys" rel="Section" href="#1_ConfigurationKeys">
<link title="Stages" rel="Section" href="#1_Stages">
<link title="Parsing context" rel="Section" href="#1_Parsingcontext">
<link title="Code Serialization" rel="Section" href="#1_CodeSerialization">
<title>Functoria : Functoria_key</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Functoria.html" title="Functoria">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Functoria_runtime.html" title="Functoria_runtime">Next</a>
</div>
<h1>Module <a href="type_Functoria_key.html">Functoria_key</a></h1>

<pre><span class="keyword">module</span> Functoria_key: <code class="code"><span class="keyword">sig</span></code> <a href="Functoria_key.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Configuration and runtime command-line arguments.<br>
</div>
<hr width="100%">

<pre><span class="keyword">module</span> <a href="Functoria_key.Arg.html">Arg</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Functoria_key.Arg.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Cross-stage command-line arguments.
</div>

<pre><span id="TYPEvalue"><span class="keyword">type</span> <code class="type">+'a</code> value</span> </pre>
<div class="info ">
The type for configure-time and run-time values. Values are either
    <a href="Functoria_key.html#VALpure"><code class="code"><span class="constructor">Functoria_key</span>.pure</code></a> or obtained by composing other values. Values might have
    <a href="Functoria_key.html#VALdeps">data dependencies</a>, which form an (implicit) directed and
    acyclic graph that need to be evaluated.<br>
</div>


<pre><span id="VALpure"><span class="keyword">val</span> pure</span> : <code class="type">'a -> 'a <a href="Functoria_key.html#TYPEvalue">value</a></code></pre><div class="info ">
<code class="code">pure x</code> is a value without any dependency.<br>
</div>

<pre><span id="VAL($)"><span class="keyword">val</span> ($)</span> : <code class="type">('a -> 'b) <a href="Functoria_key.html#TYPEvalue">value</a> -><br>       'a <a href="Functoria_key.html#TYPEvalue">value</a> -> 'b <a href="Functoria_key.html#TYPEvalue">value</a></code></pre><div class="info ">
<code class="code">f $ v</code> is is the value resulting from the application of
    <code class="code">f</code>'value to <code class="code">v</code>'s value. <code class="code">$</code> is the usual <i>app</i> operator for
    <a href="http://dx.doi.org/10.1017/S0956796807006326">applicative
    functor</a>.<br>
</div>

<pre><span id="VALmap"><span class="keyword">val</span> map</span> : <code class="type">('a -> 'b) -> 'a <a href="Functoria_key.html#TYPEvalue">value</a> -> 'b <a href="Functoria_key.html#TYPEvalue">value</a></code></pre><div class="info ">
<code class="code">map f v</code> is <code class="code">pure f $ v</code>.<br>
</div>

<pre><span id="VALif_"><span class="keyword">val</span> if_</span> : <code class="type">bool <a href="Functoria_key.html#TYPEvalue">value</a> -> 'a -> 'a -> 'a <a href="Functoria_key.html#TYPEvalue">value</a></code></pre><div class="info ">
<code class="code">if_ v x y</code> is <code class="code">map (<span class="keyword">fun</span> b <span class="keywordsign">-&gt;</span> <span class="keyword">if</span> b <span class="keyword">then</span> x <span class="keyword">else</span> y) v</code>.<br>
</div>

<pre><span id="VALmatch_"><span class="keyword">val</span> match_</span> : <code class="type">'a <a href="Functoria_key.html#TYPEvalue">value</a> -> ('a -> 'b) -> 'b <a href="Functoria_key.html#TYPEvalue">value</a></code></pre><div class="info ">
<code class="code">match_ v pattern</code> is <code class="code">map pattern v</code>.<br>
</div>

<pre><span id="VALdefault"><span class="keyword">val</span> default</span> : <code class="type">'a <a href="Functoria_key.html#TYPEvalue">value</a> -> 'a</code></pre><div class="info ">
<code class="code">default v</code> returns the default value for <code class="code">v</code>.<br>
</div>
<br>
<h1 id="1_ConfigurationKeys">Configuration Keys</h1><br>

<pre><span id="TYPEkey"><span class="keyword">type</span> <code class="type">'a</code> key</span> </pre>
<div class="info ">
The type for configuration keys. Keys are used to retrieve the
    cross-stage values they are holding (by indexing contents in the
    autogenerated <code class="code"><span class="constructor">Bootgen_var</span></code> module) but also to parameterize the
    choice of <a href="Functoria.html#VALif_impl">module implementation</a>.<br>
</div>


<pre><span id="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">string -> 'a <a href="Functoria_key.Arg.html#TYPEt">Arg.t</a> -> 'a <a href="Functoria_key.html#TYPEkey">key</a></code></pre><div class="info ">
<code class="code">create n a</code> is the key named <code class="code">n</code> whose contents is determined by
    parsing the command-line argument <code class="code">a</code>.<br>
</div>

<pre><span id="VALvalue"><span class="keyword">val</span> value</span> : <code class="type">'a <a href="Functoria_key.html#TYPEkey">key</a> -> 'a <a href="Functoria_key.html#TYPEvalue">value</a></code></pre><div class="info ">
<code class="code">value k</code> is the value parsed by <code class="code">k</code>.<br>
</div>

<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> </pre>
<div class="info ">
The type for abstract <a href="Functoria_key.html#TYPEkey">keys</a>.<br>
</div>


<pre><span id="VALabstract"><span class="keyword">val</span> abstract</span> : <code class="type">'a <a href="Functoria_key.html#TYPEkey">key</a> -> <a href="Functoria_key.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">hide k</code> is the <code class="code">k</code> with its type hidden.<br>
</div>

<pre><span id="VALcompare"><span class="keyword">val</span> compare</span> : <code class="type"><a href="Functoria_key.html#TYPEt">t</a> -> <a href="Functoria_key.html#TYPEt">t</a> -> int</code></pre><div class="info ">
<code class="code">compare</code> compares untyped keys.<br>
</div>

<pre><span id="VALpp"><span class="keyword">val</span> pp</span> : <code class="type"><a href="Functoria_key.html#TYPEt">t</a> Fmt.t</code></pre><div class="info ">
<code class="code">pp fmt k</code> prints the name of <code class="code">k</code>.<br>
</div>

<pre><span id="VALwith_deps"><span class="keyword">val</span> with_deps</span> : <code class="type"><a href="Functoria_key.html#TYPEt">t</a> list -> 'a <a href="Functoria_key.html#TYPEvalue">value</a> -> 'a <a href="Functoria_key.html#TYPEvalue">value</a></code></pre><div class="info ">
<code class="code">with_deps keys v</code> is <code class="code">v</code> with <code class="code">keys</code> as data-dependencies.<br>
</div>

<pre><span id="VALdeps"><span class="keyword">val</span> deps</span> : <code class="type">'a <a href="Functoria_key.html#TYPEvalue">value</a> -> <a href="Functoria_key.html#TYPEt">t</a> list</code></pre><div class="info ">
<code class="code">deps v</code> are <code class="code">v</code>'s data-dependencies.<br>
</div>

<pre><span id="VALpp_deps"><span class="keyword">val</span> pp_deps</span> : <code class="type">'a <a href="Functoria_key.html#TYPEvalue">value</a> Fmt.t</code></pre><div class="info ">
<code class="code">pp_deps fmt v</code> prints the name of the dependencies of <code class="code">v</code>.<br>
</div>
<br>
<h1 id="1_Stages">Stages</h1><br>

<pre><span id="VALis_runtime"><span class="keyword">val</span> is_runtime</span> : <code class="type"><a href="Functoria_key.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<code class="code">is_runtime k</code> is true if <code class="code">k</code>'s stage is <code class="code"><span class="keywordsign">`</span><span class="constructor">Run</span></code> or <code class="code"><span class="keywordsign">`</span><span class="constructor">Both</span></code>.<br>
</div>

<pre><span id="VALis_configure"><span class="keyword">val</span> is_configure</span> : <code class="type"><a href="Functoria_key.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<code class="code">is_configure k</code> is true if <code class="code">k</code>'s stage is <code class="code"><span class="keywordsign">`</span><span class="constructor">Configure</span></code> or <code class="code"><span class="keywordsign">`</span><span class="constructor">Both</span></code>.<br>
</div>

<pre><span id="VALfilter_stage"><span class="keyword">val</span> filter_stage</span> : <code class="type"><a href="Functoria_key.Arg.html#TYPEstage">Arg.stage</a> -> <a href="Functoria_key.html#TYPEt">t</a> list -> <a href="Functoria_key.html#TYPEt">t</a> list</code></pre><div class="info ">
<code class="code">filter_stage s ks</code> is <code class="code">ks</code> but with only keys available at stage
    <code class="code">s</code>.<br>
</div>

<pre><span class="keyword">module</span> <a href="Functoria_key.Alias.html">Alias</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Functoria_key.Alias.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Alias allows to define virtual keys in terms of other keys at
    configuration time only.
</div>

<pre><span id="VALalias"><span class="keyword">val</span> alias</span> : <code class="type">string -> 'a <a href="Functoria_key.Alias.html#TYPEt">Alias.t</a> -> 'a <a href="Functoria_key.html#TYPEkey">key</a></code></pre><div class="info ">
Similar to <a href="Functoria_key.html#VALcreate"><code class="code"><span class="constructor">Functoria_key</span>.create</code></a> but for command-line alias.<br>
</div>

<pre><span id="VALaliases"><span class="keyword">val</span> aliases</span> : <code class="type"><a href="Functoria_key.html#TYPEt">t</a> -> <a href="Functoria_key.html#TYPEt">t</a> list</code></pre><div class="info ">
<code class="code">aliases t</code> is the list of <code class="code">t</code>'s aliases.<br>
</div>
<br>
<h1 id="1_Parsingcontext">Parsing context</h1><br>

<pre><span id="TYPEcontext"><span class="keyword">type</span> <code class="type"></code>context</span> </pre>
<div class="info ">
The type for values holding parsing context.<br>
</div>


<pre><span id="VALcontext"><span class="keyword">val</span> context</span> : <code class="type">?stage:<a href="Functoria_key.Arg.html#TYPEstage">Arg.stage</a> -><br>       <a href="Functoria_key.html#TYPEt">t</a> list -> <a href="Functoria_key.html#TYPEcontext">context</a> Cmdliner.Term.t</code></pre><div class="info ">
<code class="code">context ks</code> is a <code class="code"><span class="constructor">Cmdliner</span></code>
    <a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Term.html#TYPt">
    term</a> that evaluates into a parsing context for command-line
    arguments.<br>
</div>

<pre><span id="VALmem"><span class="keyword">val</span> mem</span> : <code class="type"><a href="Functoria_key.html#TYPEcontext">context</a> -> 'a <a href="Functoria_key.html#TYPEvalue">value</a> -> bool</code></pre><div class="info ">
<code class="code">mem c v</code> is <code class="code"><span class="keyword">true</span></code> iff all the dependencies of <code class="code">v</code> have been
    evaluated.<br>
</div>

<pre><span id="VALpeek"><span class="keyword">val</span> peek</span> : <code class="type"><a href="Functoria_key.html#TYPEcontext">context</a> -> 'a <a href="Functoria_key.html#TYPEvalue">value</a> -> 'a option</code></pre><div class="info ">
<code class="code">peek c v</code> is <code class="code"><span class="constructor">Some</span> x</code> if <code class="code">mem v</code> and <code class="code"><span class="constructor">None</span></code> otherwise.<br>
</div>

<pre><span id="VALeval"><span class="keyword">val</span> eval</span> : <code class="type"><a href="Functoria_key.html#TYPEcontext">context</a> -> 'a <a href="Functoria_key.html#TYPEvalue">value</a> -> 'a</code></pre><div class="info ">
<code class="code">eval c v</code> evaluates <code class="code">v</code> in <code class="code">c</code>'s context, using default values if
    necessary.<br>
</div>

<pre><span id="VALget"><span class="keyword">val</span> get</span> : <code class="type"><a href="Functoria_key.html#TYPEcontext">context</a> -> 'a <a href="Functoria_key.html#TYPEkey">key</a> -> 'a</code></pre><div class="info ">
<code class="code">get c k</code> is <code class="code">k</code>'s value in <code class="code">c</code>'s context.<br>
</div>

<pre><span id="VALpps"><span class="keyword">val</span> pps</span> : <code class="type"><a href="Functoria_key.html#TYPEcontext">context</a> -> <a href="Functoria_key.html#TYPEt">t</a> list Fmt.t</code></pre><div class="info ">
<code class="code">pps c fmt ks</code> prints the keys <code class="code">ks</code> using the context <code class="code">c</code> to get
    their value.<br>
</div>
<br>
<h1 id="1_CodeSerialization">Code Serialization</h1><br>

<pre><span id="VALocaml_name"><span class="keyword">val</span> ocaml_name</span> : <code class="type"><a href="Functoria_key.html#TYPEt">t</a> -> string</code></pre><div class="info ">
<code class="code">ocaml_name k</code> is the ocaml name of <code class="code">k</code>.<br>
</div>

<pre><span id="VALserialize_call"><span class="keyword">val</span> serialize_call</span> : <code class="type"><a href="Functoria_key.html#TYPEt">t</a> Fmt.t</code></pre><div class="info ">
<code class="code">serialize_call fmt k</code> outputs <code class="code"><span class="constructor">Bootvar_gen</span>.n ()</code> to <code class="code">fmt</code>, where
    <code class="code">n</code> is <code class="code">k</code>'s <a href="Functoria_key.html#VALocaml_name">OCaml name</a>.<br>
</div>

<pre><span id="VALserialize"><span class="keyword">val</span> serialize</span> : <code class="type"><a href="Functoria_key.html#TYPEcontext">context</a> -> <a href="Functoria_key.html#TYPEt">t</a> Fmt.t</code></pre><div class="info ">
<code class="code">serialize ctx ppf k</code> outputs the <code class="code"><span class="constructor">Cmdliner</span></code> runes to parse
    command-line arguments represented by <code class="code">k</code> at runtime.<br>
</div>
</body></html>