<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Arg (functoria.Functoria_key.Arg)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">functoria</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Functoria_key.Arg</span></h1></header><div class="doc"><p>Cross-stage command-line arguments.</p></div><p>Terms for cross-stage arguments.</p><p>This module extends
<a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html">Cmdliner.Arg</a> to allow MetaOCaml-style typed cross-stage
persistency of command-line arguments.</p><h2>Argument converters</h2><div class="spec type" id="type-serialize"><a href="#type-serialize" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a serialize</code><code><span class="keyword"> = </span>Format.formatter <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> unit</code><code></code></div><div class="doc"><p>The type for command-line argument serializers. A value of type
<code class="code">'a serialize</code> generates a syntactically valid OCaml
representation which evaluates to a value of type <code class="code">'a</code>.</p></div></div><div class="spec type" id="type-runtime_conv"><a href="#type-runtime_conv" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a runtime_conv</code><code><span class="keyword"> = </span>string</code><code></code></div><div class="doc"><p>The type for command-line argument converters used at
runtime. A value of type <code class="code">'a runtime_conv</code> is a symbol name of
type
<a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#TYPEconverter">Cmdliner.Arg.converter</a>.</p></div></div><div class="spec type" id="type-converter"><a href="#type-converter" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a converter</code><code></code><code></code></div><div class="doc"><p>The type for argument converters.</p></div></div><div class="spec val" id="val-conv"><a href="#val-conv" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>conv : conv:<span class="type-var">'a</span> Cmdliner.Arg.converter <span class="keyword">&#8209;&gt;</span> serialize:<span class="type-var">'a</span> <a href="index.html#type-serialize">serialize</a> <span class="keyword">&#8209;&gt;</span> runtime_conv:<span class="type-var">'a</span> <a href="index.html#type-runtime_conv">runtime_conv</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-converter">converter</a></code></div><div class="doc"><p><code class="code">conv c s r</code> is the argument converter using <code class="code">c</code> to convert user
strings into OCaml value, <code class="code">s</code> to convert OCaml values into
strings interpretable as OCaml expressions, and the function
named <code class="code">r</code> to convert user strings into OCaml values at
runtime.</p></div></div><div class="spec val" id="val-string"><a href="#val-string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>string : string <a href="index.html#type-converter">converter</a></code></div><div class="doc"><p><code class="code">string</code> converts strings.</p></div></div><div class="spec val" id="val-bool"><a href="#val-bool" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>bool : bool <a href="index.html#type-converter">converter</a></code></div><div class="doc"><p><code class="code">bool</code> converts booleans.</p></div></div><div class="spec val" id="val-int"><a href="#val-int" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>int : int <a href="index.html#type-converter">converter</a></code></div><div class="doc"><p><code class="code">int</code> converts integers.</p></div></div><div class="spec val" id="val-list"><a href="#val-list" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>list : <span class="type-var">'a</span> <a href="index.html#type-converter">converter</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> list <a href="index.html#type-converter">converter</a></code></div><div class="doc"><p><code class="code">list t</code> converts lists of <code class="code">t</code>s.</p></div></div><div class="spec val" id="val-some"><a href="#val-some" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>some : <span class="type-var">'a</span> <a href="index.html#type-converter">converter</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-converter">converter</a></code></div><div class="doc"><p><code class="code">some t</code> converts <code class="code">t</code> options.</p></div></div><h2>Arguments and their information</h2><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a t</code><code></code><code></code></div><div class="doc"><p>The type for arguments holding data of type <code class="code">'a</code>.</p></div></div><div class="spec type" id="type-info"><a href="#type-info" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>info</code><code></code><code></code></div><div class="doc"><p>The type for information about cross-stage command-line
arguments. See
<a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#arginfo">Cmdliner's arguments</a>.</p></div></div><div class="spec val" id="val-info"><a href="#val-info" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>info : ?&#8288;docs:string <span class="keyword">&#8209;&gt;</span> ?&#8288;docv:string <span class="keyword">&#8209;&gt;</span> ?&#8288;doc:string <span class="keyword">&#8209;&gt;</span> ?&#8288;env:string <span class="keyword">&#8209;&gt;</span> string list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-info">info</a></code></div><div class="doc"><p>Define cross-stage information for an argument. See
<a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#TYPEinfo">Cmdliner.Arg.info</a>. If not set, <code class="code">docs</code> is <code class="code">&quot;UNIKERNEL PARAMETERS&quot;</code>.</p></div></div><h2>Optional Arguments</h2><div class="spec type" id="type-stage"><a href="#type-stage" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>stage</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-stage.Configure" class="anchored"><td class="def constructor"><a href="#type-stage.Configure" class="anchor"></a><code><span class="keyword">| </span></code><code>`Configure</code></td></tr><tr id="type-stage.Run" class="anchored"><td class="def constructor"><a href="#type-stage.Run" class="anchor"></a><code><span class="keyword">| </span></code><code>`Run</code></td></tr><tr id="type-stage.Both" class="anchored"><td class="def constructor"><a href="#type-stage.Both" class="anchor"></a><code><span class="keyword">| </span></code><code>`Both</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>The type for specifying at which stage an argument is available.</p><ul><li><code class="code">`Configure</code> means that the argument is read on the
command-line at configuration-time.</li><li><code class="code">`Run</code> means that the argument is read on the command-line at
runtime.</li><li><code class="code">`Both</code> means that the argument is read on the command-line
both at configuration-time and run-time.</li></ul></div></div><div class="spec val" id="val-opt"><a href="#val-opt" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>opt : ?&#8288;stage:<a href="index.html#type-stage">stage</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-converter">converter</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-info">info</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">opt conv v i</code> is similar to
<a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#VALopt">Cmdliner.Arg.opt</a> but for cross-stage optional command-line
arguments. If not set, <code class="code">stage</code> is <code class="code">`Both</code>.</p></div></div><div class="spec val" id="val-required"><a href="#val-required" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>required : ?&#8288;stage:<a href="index.html#type-stage">stage</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-converter">converter</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-info">info</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">required conv i</code> is similar to
<a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#VALrequired">Cmdliner.Arg.required</a> but for cross-stage required command-line
arguments. If not set, <code class="code">stage</code> is <code class="code">`Both</code>.</p></div></div><div class="spec val" id="val-flag"><a href="#val-flag" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>flag : ?&#8288;stage:<a href="index.html#type-stage">stage</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-info">info</a> <span class="keyword">&#8209;&gt;</span> bool <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">flag i</code> is similar to
<a href="http://erratique.ch/software/cmdliner/doc/Cmdliner.Arg.html#VALflag">Cmdliner.Arg.flag</a> but for cross-stage command-line flags. If not
set, <code class="code">stage</code> is <code class="code">`Both</code>.</p></div></div></body></html>